const rootEl=document.querySelector(":root"),defaultTheme=rootEl.dataset.theme,DARK_THEME_NAME="dark",LIGHT_THEME_NAME="light",DEFAULT_THEME_NAME=defaultTheme;function getTheme(){const e=window.matchMedia("(prefers-color-scheme:dark)").matches,t=localStorage.getItem("theme");return t===LIGHT_THEME_NAME?LIGHT_THEME_NAME:t===DARK_THEME_NAME||e?DARK_THEME_NAME:DEFAULT_THEME_NAME}function isThemeValid(e){return[LIGHT_THEME_NAME,DARK_THEME_NAME].includes(e)}function setTheme(e){isThemeValid(e)&&(rootEl.setAttribute("data-theme",e),window.CURRENT_THEME=e)}function storeThemePreference(e){let t=isThemeValid(e);e||(t=!0,e=""),t&&localStorage.setItem("theme",e)}function startListeningToOSTheme(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",setTheme(getTheme()))}function init(){window.DARK_THEME_NAME=DARK_THEME_NAME,window.LIGHT_THEME_NAME=LIGHT_THEME_NAME,window.DEFAULT_THEME_NAME=DEFAULT_THEME_NAME,window.setTheme=setTheme,window.storeThemePreference=storeThemePreference,setTheme(getTheme()),startListeningToOSTheme(),window.addEventListener("storage",(()=>{const e=window.localStorage.getItem("theme");setTheme(e),isThemeValid(e)||storeThemePreference(DEFAULT_THEME_NAME)}))}init();