const rootEl=document.querySelector(":root"),defaultTheme=rootEl.dataset.theme,DARK_THEME_NAME="dark",LIGHT_THEME_NAME="light",RESET_THEME_NAME="RESET_THEME",DEFAULT_THEME_NAME=defaultTheme||LIGHT_THEME_NAME;function getDefaultTheme(){return window.matchMedia("(prefers-color-scheme:dark)").matches?DARK_THEME_NAME:DEFAULT_THEME_NAME}function getTheme(){const e=window.matchMedia("(prefers-color-scheme:dark)").matches,E=localStorage.getItem("theme");return E===LIGHT_THEME_NAME?LIGHT_THEME_NAME:E===DARK_THEME_NAME||e?DARK_THEME_NAME:DEFAULT_THEME_NAME}function isThemeValid(e){return[LIGHT_THEME_NAME,DARK_THEME_NAME].includes(e)}function setTheme(e){if("RESET_THEME"===e)return rootEl.setAttribute("data-theme",getDefaultTheme());isThemeValid(e)&&(rootEl.setAttribute("data-theme",e),window.CURRENT_THEME=e)}function storeThemePreference(e){if("RESET_THEME"===e)return localStorage.removeItem("theme");let E=isThemeValid(e);e||(E=!0,e=""),E&&localStorage.setItem("theme",e)}function startListeningToOSTheme(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",setTheme(getTheme()))}function init(){window.DARK_THEME_NAME=DARK_THEME_NAME,window.LIGHT_THEME_NAME=LIGHT_THEME_NAME,window.DEFAULT_THEME_NAME=DEFAULT_THEME_NAME,window.RESET_THEME_NAME="RESET_THEME",window.setTheme=setTheme,window.storeThemePreference=storeThemePreference,setTheme(getTheme()),startListeningToOSTheme(),window.addEventListener("storage",(()=>{const e=window.localStorage.getItem("theme");setTheme(e),isThemeValid(e)||storeThemePreference("RESET_THEME")}))}init();