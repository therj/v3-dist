const goDark=document.querySelector(".goDark"),goLight=document.querySelector(".goLight"),navToggleCheckbox=document.querySelector("input.header__toggle-nav"),currentTheme=window.CURRENT_THEME;function changeTheme(e){window.setTheme(e),window.storeThemePreference(e)}function hmsFormatter(e){e<0&&(e=0);const t=Math.floor(e/60/60),o=Math.floor(e/60-60*t),n=Math.floor(e-60*o-60*t*60);return`${t>0?`${t}:`:""}${o<10?`0${o}`:o}:${n<10?`0${n}`:n}`}let hoverStartInterval;function podcastHoverStartHandler(e,t,o){const n=o.closest(".recent__card__podcast__list--item").querySelector(".recent__card__podcast__list--item__progress--tooltip");o.duration?n.classList.remove("d-none"):(o.load(),console.info("No audio duration, podcastHoverStartHandler is waiting!"),hoverStartInterval=setInterval((()=>{o.duration&&(clearInterval(hoverStartInterval),n.classList.remove("d-none"))}),200))}function podcastHoverOutHandler(e,t,o){const n=o.closest(".recent__card__podcast__list--item").querySelector(".recent__card__podcast__list--item__progress--tooltip");clearInterval(hoverStartInterval),n.classList.add("d-none")}function podcastHoverHandler(e,t,o){const n=e.currentTarget.getBoundingClientRect().left,r=e.currentTarget.getBoundingClientRect().right-n,a=(e.clientX||e.pageX)-n%1,s=(a-n)/r,c=o.closest(".recent__card__podcast__list--item").querySelector(".recent__card__podcast__list--item__progress--tooltip");if(c.style=`left: ${a-n}px`,o.duration){const e=s*o.duration;c.innerText=hmsFormatter(e,o.duration)}else{const e=setInterval((()=>{if(o.duration){clearInterval(e);const t=s*o.duration;c.innerText=hmsFormatter(t)}}),200)}}function podcastSeekHandler(e,t){const o=e.currentTarget.getBoundingClientRect().left,n=e.currentTarget.getBoundingClientRect().right-o,r=((e.clientX||e.pageX)-o%1-o)/n;if(t.duration){const e=r*t.duration;t.currentTime=e}else{const e=setInterval((()=>{if(t.duration){clearInterval(e);const o=r*t.duration;t.currentTime=o}}),200)}t.paused&&t.play()}function podcastPlayerHandler(e){const t=".recent__card__podcast__list--item",o=`${t}__heading--btn`,n=`${t}__progress`,r=`${n}--eventMaster`,a=document.querySelectorAll(t);for(let e=0;e<a.length;e++){const t=a[e],s=t.querySelector(o),c=t.querySelector("audio"),d=t.querySelector(r),i=t.querySelector(".recent__card__podcast__list--item__datetime--duration .played");c&&(s.addEventListener("click",(e=>{c.paused?(c.play(),console.info("Playing!")):(c.pause(),console.info("Paused!"))})),c.addEventListener("timeupdate",(()=>{t.querySelector(n).querySelector(`${n}--played`).style.width=c.currentTime/c.duration*100+"%",i.innerHTML=`${hmsFormatter(c.currentTime)} / `})),d.addEventListener("click",(e=>podcastSeekHandler(e,c))),d.addEventListener("mouseenter",(e=>podcastHoverStartHandler(e,t,c))),d.addEventListener("mousemove",(e=>podcastHoverHandler(e,t,c))),d.addEventListener("mouseleave",(e=>podcastHoverOutHandler(e,t,c))),c.addEventListener("play",(e=>{console.info('Audio "play"'),t.classList.add("started"),t.classList.add("playing")})),c.addEventListener("playing",(e=>{console.info('Audio "playing"');const t=document.getElementsByTagName("audio");for(let o=0,n=t.length;o<n;o++)t[o]!==e.target&&t[o].pause()})),c.addEventListener("pause",(e=>{console.info('Audio "pause"'),t.classList.remove("playing")})),c.addEventListener("progress",(e=>{console.info('Audio "progress"');const o=t.querySelector(n).querySelector(`${n}--buffered`);o.innerHTML="";const{duration:r}=c;for(let e=0;e<c.buffered.length;e++){const t=c.buffered.start(e)/r*100,n=c.buffered.end(e)/r*100,a=document.createElement("span");a.style.left=`${t}%`,a.style.right=100-n+"%",0!==t&&(a.style.borderTopLeftRadius=0,a.style.borderBottomLeftRadius=0),100!==n&&(a.style.borderTopRightRadius=0,a.style.borderBottomRightRadius=0),o.appendChild(a)}})),c.addEventListener("loadstart",(e=>{console.info('Audio "loadstart"')})),c.addEventListener("loadeddata",(e=>{console.info('Audio "loadeddata"')})),c.addEventListener("ended",(e=>{console.info('Audio "ended"')})),c.addEventListener("canplay",(e=>{console.info('Audio "canplay"'),t.classList.add("canplay")})))}}function podcastPlayerHandlerObserver(){const e={root:document.querySelector(".recent"),rootMargin:"0px",threshold:.5},t=new IntersectionObserver(podcastPlayerHandler,e),o=document.querySelector(".recent__card__podcast");o&&t.observe(o)}function abs(e){return e*(e>0?1:-1)}function tabsChangeListener(){["experience","foss"].forEach((e=>{document.querySelectorAll(`input[type=radio][name="${e}"]`).forEach((t=>{t.addEventListener("change",(t=>{t.preventDefault();const o=t.target.closest(`.${e}__tablist`).closest(`.${e}`).querySelector(`.${e}__content`),n=o.querySelector(`#${t.target.id}-content`);if(o.hasChildNodes()){const t=o.childNodes;for(let o=0;o<t.length;o++){const{id:r}=t[o];if(r&&r.startsWith(`${e}-`)&&r.endsWith("-content")&&t[o]!==n){const e=t[o];setTimeout((()=>e.classList.remove("animate")),0),setTimeout((()=>e.classList.remove("active")),200)}}}setTimeout((()=>n.classList.add("active")),200),setTimeout((()=>n.classList.add("animate")),210)}))}))}))}function moreProjectsClickHandler(){const e=document.querySelector(".projects__other__more--link"),t=document.querySelector(".projects__other__less--link"),o=document.querySelector(".projects__other");[e,t].forEach((n=>n&&n.addEventListener("click",(()=>{if(o.classList.toggle("display-all"),n===t){const t=e.offsetTop-200;window.scroll({top:t,behavior:"auto"})}}))))}const menuToggle=e=>{e.stopPropagation();const{checked:t}=e.target;t?document.body.classList.add("scroll-lock"):document.body.classList.remove("scroll-lock")};function init(){goDark.addEventListener("click",(e=>{changeTheme(window.DARK_THEME_NAME)})),goLight.addEventListener("click",(e=>{changeTheme(window.LIGHT_THEME_NAME)})),document.querySelector(".header__theme").oncontextmenu=e=>(e.preventDefault(),changeTheme(window.RESET_THEME_NAME),setTimeout((()=>{window.alert("Using default theme. Preference removed.")}),500),!0),tabsChangeListener(),podcastPlayerHandlerObserver(),moreProjectsClickHandler(),navToggleCheckbox.addEventListener("change",menuToggle)}init();