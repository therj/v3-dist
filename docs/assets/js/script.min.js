const goDark=document.querySelector(".goDark"),goLight=document.querySelector(".goLight"),navBar=document.querySelector("nav"),navPoly=document.querySelector(".nav__poly"),navToggleCheckbox=document.querySelector("input.nav__toggle"),currentTheme=window.CURRENT_THEME,NAV_POLY_SCROLL_SHOW=32,NAV_POLY_SCROLL_HIDE=48,HIDE_NAV_SCROLL_POS=256;function setThemeIcons(e){}let curScroll,hoverStartInterval,prevScroll=window.scrollY||document.documentElement.scrollTop,direction=0,prevDirection=0;function toggleHeader(e,t){"DOWN"===e&&t>256?(navBar.classList.add("nav--hide"),navPoly&&navPoly.classList.add("nav__poly--hide"),prevDirection=e):"UP"===e&&(navBar.classList.remove("nav--hide"),prevDirection=e)}function checkScroll(){curScroll=window.scrollY||document.documentElement.scrollTop,curScroll>prevScroll?direction="DOWN":curScroll<prevScroll&&(direction="UP"),curScroll>=48?navPoly.classList.add("nav__poly--hide"):curScroll<=32&&navPoly.classList.remove("nav__poly--hide"),direction!==prevDirection&&toggleHeader(direction,curScroll),prevScroll=curScroll}function changeTheme(e){window.setTheme(e),window.storeThemePreference(e)}function menuToggle(){navToggleCheckbox.checked?document.body.classList.add("scroll-lock"):document.body.classList.remove("scroll-lock")}function hmsFormatter(e){e<0&&(e=0);const t=Math.floor(e/60/60),o=Math.floor(e/60-60*t),r=Math.floor(e-60*o-60*t*60);return`${t>0?`${t}:`:""}${o<10?`0${o}`:o}:${r<10?`0${r}`:r}`}function podcastHoverStartHandler(e,t,o){const r=o.closest(".recent__card__podcast__list--item").querySelector(".recent__card__podcast__list--item__progress--tooltip");o.duration?r.classList.remove("d-none"):(o.load(),console.info("No audio duration, podcastHoverStartHandler is waiting!"),hoverStartInterval=setInterval((()=>{o.duration&&(clearInterval(hoverStartInterval),r.classList.remove("d-none"))}),200))}function podcastHoverOutHandler(e,t,o){const r=o.closest(".recent__card__podcast__list--item").querySelector(".recent__card__podcast__list--item__progress--tooltip");clearInterval(hoverStartInterval),r.classList.add("d-none")}function podcastHoverHandler(e,t,o){const r=e.currentTarget.getBoundingClientRect().left,n=e.currentTarget.getBoundingClientRect().right-r,c=(e.clientX||e.pageX)-r%1,a=(c-r)/n,s=o.closest(".recent__card__podcast__list--item").querySelector(".recent__card__podcast__list--item__progress--tooltip");if(s.style=`left: ${c-r}px`,o.duration){const e=a*o.duration;s.innerText=hmsFormatter(e,o.duration)}else{const e=setInterval((()=>{if(o.duration){clearInterval(e);const t=a*o.duration;s.innerText=hmsFormatter(t)}}),200)}}function podcastSeekHandler(e,t){const o=e.currentTarget.getBoundingClientRect().left,r=e.currentTarget.getBoundingClientRect().right-o,n=((e.clientX||e.pageX)-o%1-o)/r;if(t.duration){const e=n*t.duration;t.currentTime=e}else{const e=setInterval((()=>{if(t.duration){clearInterval(e);const o=n*t.duration;t.currentTime=o}}),200)}t.paused&&t.play()}function podcastPlayerHandler(e){const t=".recent__card__podcast__list--item",o=`${t}__heading--btn`,r=`${t}__progress`,n=`${r}--eventMaster`,c=document.querySelectorAll(t);for(let e=0;e<c.length;e++){const t=c[e],a=t.querySelector(o),s=t.querySelector("audio"),l=t.querySelector(n),d=t.querySelector(".recent__card__podcast__list--item__datetime--duration .played");s&&(a.addEventListener("click",(e=>{s.paused?(s.play(),console.info("Playing!")):(s.pause(),console.info("Paused!"))})),s.addEventListener("timeupdate",(()=>{t.querySelector(r).querySelector(`${r}--played`).style.width=s.currentTime/s.duration*100+"%",d.innerHTML=`${hmsFormatter(s.currentTime)} / `})),l.addEventListener("click",(e=>podcastSeekHandler(e,s))),l.addEventListener("mouseenter",(e=>podcastHoverStartHandler(e,t,s))),l.addEventListener("mousemove",(e=>podcastHoverHandler(e,t,s))),l.addEventListener("mouseleave",(e=>podcastHoverOutHandler(e,t,s))),s.addEventListener("play",(e=>{console.info('Audio "play"'),t.classList.add("started"),t.classList.add("playing")})),s.addEventListener("playing",(e=>{console.info('Audio "playing"');const t=document.getElementsByTagName("audio");for(let o=0,r=t.length;o<r;o++)t[o]!==e.target&&t[o].pause()})),s.addEventListener("pause",(e=>{console.info('Audio "pause"'),t.classList.remove("playing")})),s.addEventListener("progress",(e=>{console.info('Audio "progress"');const o=t.querySelector(r).querySelector(`${r}--buffered`);o.innerHTML="";const{duration:n}=s;for(let e=0;e<s.buffered.length;e++){const t=s.buffered.start(e)/n*100,r=s.buffered.end(e)/n*100,c=document.createElement("span");c.style.left=`${t}%`,c.style.right=100-r+"%",0!==t&&(c.style.borderTopLeftRadius=0,c.style.borderBottomLeftRadius=0),100!==r&&(c.style.borderTopRightRadius=0,c.style.borderBottomRightRadius=0),o.appendChild(c)}})),s.addEventListener("loadstart",(e=>{console.info('Audio "loadstart"')})),s.addEventListener("loadeddata",(e=>{console.info('Audio "loadeddata"')})),s.addEventListener("ended",(e=>{console.info('Audio "ended"')})),s.addEventListener("canplay",(e=>{console.info('Audio "canplay"'),t.classList.add("canplay")})))}}function podcastPlayerHandlerObserver(){const e={root:document.querySelector(".recent"),rootMargin:"0px",threshold:.5},t=new IntersectionObserver(podcastPlayerHandler,e),o=document.querySelector(".recent__card__podcast");o&&t.observe(o)}function abs(e){return e*(e>0?1:-1)}function tabsChangeListener(){["experience","foss"].forEach((e=>{document.querySelectorAll(`input[type=radio][name="${e}"]`).forEach((t=>{t.addEventListener("change",(t=>{t.preventDefault();const o=t.target.closest(`.${e}__tablist`).closest(`.${e}`).querySelector(`.${e}__content`),r=o.querySelector(`#${t.target.id}-content`);if(o.hasChildNodes()){const t=o.childNodes;for(let o=0;o<t.length;o++){const{id:n}=t[o];if(n&&n.startsWith(`${e}-`)&&n.endsWith("-content")&&t[o]!==r){const e=t[o];setTimeout((()=>e.classList.remove("animate")),0),setTimeout((()=>e.classList.remove("active")),200)}}}setTimeout((()=>r.classList.add("active")),200),setTimeout((()=>r.classList.add("animate")),210)}))}))}))}function moreProjectsClickHandler(){const e=document.querySelector(".projects__other__more--link"),t=document.querySelector(".projects__other__less--link"),o=document.querySelector(".projects__other");[e,t].forEach((r=>r&&r.addEventListener("click",(()=>{if(o.classList.toggle("display-all"),r===t){const t=e.offsetTop-200;window.scroll({top:t,behavior:"auto"})}}))))}function init(){setThemeIcons(currentTheme),goDark.addEventListener("click",(e=>{changeTheme(window.DARK_THEME_NAME),setThemeIcons(window.DARK_THEME_NAME)})),goLight.addEventListener("click",(e=>{changeTheme(window.LIGHT_THEME_NAME),setThemeIcons(window.LIGHT_THEME_NAME)})),tabsChangeListener(),podcastPlayerHandlerObserver(),moreProjectsClickHandler(),navToggleCheckbox.addEventListener("change",menuToggle),window.addEventListener("scroll",checkScroll),checkScroll()}init();